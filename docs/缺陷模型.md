# 缺陷模型设计文档

## 概述
缺陷模型用于管理系统中的软件缺陷信息，支持缺陷的全生命周期管理，包括创建、分配、修复、验证和关闭等流程。

## 模型属性

### 基本信息
| 属性名 | 数据类型 | 是否必填 | 默认值 | 描述 |
|--------|----------|----------|--------|------|
| id | Integer | 是 | 自增 | 主键 |
| defect_id | String(64) | 否 | 自动生成 | 缺陷编号 |
| title | String(256) | 是 | 无 | 缺陷标题 |
| project_id | Integer (外键) | 是 | 无 | 所属项目 |
| sprint_id | Integer (外键) | 否 | 无 | 所属迭代 |
| work_item_type | String(32) | 是 | defect | 工作项类型 |

### 缺陷详情
| 属性名 | 数据类型 | 是否必填 | 默认值 | 描述 |
|--------|----------|----------|--------|------|
| description | Text | 否 | 无 | 缺陷描述（支持富文本） |
| assignee_id | Integer (外键) | 否 | 创建者 | 负责人 |
| priority | String(8) | 否 | P3 | 优先级（P0-P5） |
| is_online | Boolean | 否 | False | 是否线上缺陷 |
| severity | String(32) | 否 | 一般 | 严重程度 |
| defect_type | String(64) | 否 | 功能问题 | 缺陷类型 |
| status | String(32) | 否 | 待处理 | 缺陷状态 |

### 处理信息
| 属性名 | 数据类型 | 是否必填 | 默认值 | 描述 |
|--------|----------|----------|--------|------|
| resolver_id | Integer (外键) | 否 | 未设置 | 解决者 |
| resolution | String(64) | 否 | 未设置 | 处理结果 |
| dev_team | String(128) | 否 | 无 | 开发团队 |
| collaborators | String(256) | 否 | 未设置 | 协助者 |

### 时间信息
| 属性名 | 数据类型 | 是否必填 | 默认值 | 描述 |
|--------|----------|----------|--------|------|
| start_date | Date | 否 | 未设置 | 开始日期 |
| end_date | Date | 否 | 未设置 | 结束日期 |
| created_by_id | Integer (外键) | 是 | 无 | 创建人 |
| created_at | DateTime | 否 | 当前时间 | 创建时间 |
| updated_at | DateTime | 否 | 当前时间 | 更新时间 |

## 枚举值定义

### 优先级 (priority)
- P0: 致命/紧急
- P1: 高
- P2: 中高
- P3: 中
- P4: 低
- P5: 建议

### 严重程度 (severity)
- 致命: 系统崩溃、数据丢失等
- 严重: 功能无法使用
- 一般: 功能异常但可绕过
- 提示: 界面提示信息错误
- 建议: 用户体验优化建议
- 保留: 暂不处理的问题

### 缺陷类型 (defect_type)
- 功能问题
- 稳定性问题
- 性能问题
- 接口问题
- 安全问题
- UI界面问题
- 易用性问题
- 兼容性问题
- 数据问题
- 逻辑问题
- 需求问题
- 数据请求问题
- 成因问题

### 缺陷状态 (status)
- 待处理
- 问题修复中
- 已修复
- 已验证
- 重新打开
- 关闭

### 处理结果 (resolution)
- 未设置
- 不予处理
- 延期处理
- 外部原因
- 需求变更
- 转需求
- 挂起
- 设计如此
- 重复缺陷
- 无法重现

### 工作项类型 (work_item_type)
- 需求
- 缺陷
- 发布
- 任务

## 关联关系
- project: 关联 [ProjectInfo](file://d:\projects\agile-dev\models.py#L93-L105) 模型
- sprint: 关联 [Sprint](file://d:\projects\agile-dev\models.py#L233-L252) 模型
- assignee: 关联 [User](file://d:\projects\agile-dev\models.py#L5-L9) 模型（负责人）
- resolver: 关联 [User](file://d:\projects\agile-dev\models.py#L5-L9) 模型（解决者）
- created_by: 关联 [User](file://d:\projects\agile-dev\models.py#L5-L9) 模型（创建人）

## 数据库操作
- 支持增删改查操作
- 支持按项目、迭代、负责人等条件筛选
- 支持按状态、优先级等进行统计分析