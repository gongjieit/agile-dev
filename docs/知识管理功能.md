# 知识管理功能说明

## 功能概述

知识管理是项目管理系统中的一个重要功能模块，用于创建、编辑、查看和管理敏捷开发相关的知识文章。该模块支持Markdown格式的内容编辑，并提供分类管理、作者信息记录等功能。

## 功能结构

知识管理功能主要由以下几个部分组成：

1. **知识列表** - 展示所有知识文章的列表视图
2. **知识详情** - 查看单个知识文章的详细内容
3. **知识创建** - 创建新的知识文章
4. **知识编辑** - 修改现有知识文章
5. **知识删除** - 删除不需要的知识文章

## 核心功能

### 1. 知识列表

系统提供两种知识列表视图：
- 管理视图（仅管理员可见）：提供完整的增删改查功能
- 用户视图（所有用户可见）：仅提供查看功能

列表展示以下信息：
- 文章标题
- 分类信息
- 作者信息
- 创建时间
- 更新时间

### 2. 知识详情

用户可以点击列表中的文章标题查看详细内容：
- 支持Markdown格式渲染
- 显示文章分类标签
- 显示作者和更新时间信息
- 提供导出PDF功能（通过浏览器打印功能实现）

### 3. 知识创建与编辑

管理员可以创建和编辑知识文章：
- 提供标题输入字段
- 支持可选的分类信息
- 提供Markdown编辑器
- 实时预览功能
- 保存和取消操作

### 4. 知识删除

管理员可以删除不需要的知识文章：
- 提供删除确认机制
- 删除后自动返回知识列表

## 技术实现

### 后端实现

#### 路由和控制器
知识管理功能由 `routes/knowledge.py` 文件实现，主要包括以下路由：

1. `/knowledge` - 显示管理用知识列表（仅管理员）
2. `/knowledge_view` - 显示用户用知识列表（所有用户）
3. `/add_knowledge` - 创建新知识文章（仅管理员）
4. `/edit_knowledge/<int:knowledge_id>` - 编辑知识文章（仅管理员）
5. `/delete_knowledge/<int:knowledge_id>` - 删除知识文章（仅管理员）
6. `/knowledge_detail/<int:knowledge_id>` - 查看知识文章详情（所有用户）

#### 数据模型
知识管理使用 [AgileKnowledge](file://D:\projects\agile-dev\models.py#L97-L106) 模型，包含以下字段：
- [id](file://D:\projects\agile-dev\models.py#L98-L98)：主键
- [title](file://D:\projects\agile-dev\models.py#L99-L99)：文章标题（必填）
- [content](file://D:\projects\agile-dev\models.py#L100-L100)：文章内容（必填）
- [category](file://D:\projects\agile-dev\models.py#L101-L101)：文章分类（可选）
- [created_at](file://D:\projects\agile-dev\models.py#L102-L102)：创建时间
- [updated_at](file://D:\projects\agile-dev\models.py#L103-L103)：更新时间
- [author_id](file://D:\projects\agile-dev\models.py#L104-L104)：作者ID（外键关联User表）

#### 权限控制
- 知识列表管理页面、创建、编辑、删除功能仅管理员可见
- 知识查看页面和详情页面对所有用户开放

### 前端实现

#### 页面结构
知识管理页面使用 Bootstrap 框架构建，主要包含：
- 面包屑导航
- 响应式布局
- 表格和列表视图

#### 编辑器功能
知识创建和编辑页面提供：
- Markdown文本编辑器
- 实时预览功能
- 标签页切换（编辑/预览）

#### 内容渲染
知识详情页面：
- 使用 Marked.js 库渲染 Markdown 内容
- 提供自定义样式美化显示效果
- 支持打印导出PDF功能

## 使用流程

### 管理员操作流程
1. 管理员进入知识管理列表页面
2. 可选择添加新文章、编辑现有文章或删除文章
3. 创建/编辑文章时，填写标题、分类和内容
4. 使用预览功能确认内容显示效果
5. 保存文章后返回列表页面

### 用户查看流程
1. 用户进入知识查看页面
2. 浏览文章列表，点击感兴趣的文章标题
3. 在详情页面查看文章内容
4. 可使用导出PDF功能保存文章

## 特色功能

1. **Markdown支持** - 支持使用Markdown语法编写知识文章
2. **实时预览** - 编辑时可实时预览渲染效果
3. **分类管理** - 支持对文章进行分类管理
4. **权限分离** - 管理和查看功能分离，确保数据安全
5. **响应式设计** - 适配不同屏幕尺寸
6. **PDF导出** - 支持将文章导出为PDF格式

